GET http://localhost:8000/page/accounts.models.Config/s/?_=1451003548126

200 OK
364ms
jquery.min.js (line 4)
ParamsHeadersResponseHTMLCookies

<!-- BEGIN PAGE CONTENT-->
<div class="row">
<div class="col-md-12">
<div class="modal fade bs-modal-lg" id="filter" tabindex="-1" role="dialog" aria-hidden="true"
        >
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-body">
    <div class="portlet box green">
        <div class="portlet-title">
            <div class="caption">
                <i class="fa fa-gift"></i> 加载您需要的数据
            </div>
        </div>
        <div class="portlet-body form">
            <form role="form" class="form-horizontal" id="search_form">
                <div class="form-body">

                    <div class="form-group">
                        <label class="col-md-3 control-label">名字</label>

                        <div class="col-md-9">
                            <input type="text" class="form-control" placeholder="Enter text" name="first_name">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-3 control-label">用户名</label>

                        <div class="col-md-9">
                            <input type="text" class="form-control" placeholder="Enter text" name="username">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-3 control-label">电子邮件地址</label>

                        <div class="col-md-9">
                            <input type="text" class="form-control" placeholder="Enter text" name="email">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-3 control-label">身份证号码</label>

                        <div class="col-md-9">
                            <input type="text" class="form-control" placeholder="Enter text" name="sfzjh">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-3 control-label">超级用户状态</label>

                        <div class="col-md-9">
                            <div class="radio-list">
                                <label class="radio-inline">
                                    <input type="radio" name="is_superuser" id="is_superuser_none" value="None" checked>
                                    忽略 </label>
                                <label class="radio-inline">
                                    <input type="radio" name="is_superuser" id="is_superuser_yes" value="true"> 是
                                </label
                                        >
                                <label class="radio-inline">
                                    <input type="radio" name="is_superuser" id="is_superuser_no" value="false"> 否
                                </label
                                        >
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-3 control-label">有效</label>

                        <div class="col-md-9">
                            <div class="radio-list">
                                <label class="radio-inline">
                                    <input type="radio" name="is_active" id="is_active_none" value="None" checked> 忽略
                                </label
                                        >
                                <label class="radio-inline">
                                    <input type="radio" name="is_active" id="is_active_yes" value="true"> 是 </label>
                                <label class="radio-inline">
                                    <input type="radio" name="is_active" id="is_active_no" value="false"> 否 </label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-3 control-label">职员状态</label>

                        <div class="col-md-9">
                            <div class="radio-list">
                                <label class="radio-inline">
                                    <input type="radio" name="is_staff" id="is_staff_none" value="None" checked> 忽略
                                </label
                                        >
                                <label class="radio-inline">
                                    <input type="radio" name="is_staff" id="is_staff_yes" value="true"> 是 </label>
                                <label class="radio-inline">
                                    <input type="radio" name="is_staff" id="is_staff_no" value="false"> 否 </label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-3 control-label">学校</label>

                        <div class="col-md-9">
                            <select class="form-control select2me" name="xx" id="foreign_key_xx">
                                <option value="" selected>忽略</option>

                                <option value="1">绥化第十中学</option>

                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-3 control-label">年级</label>

                        <div class="col-md-9">
                            <select class="form-control select2me" name="nj" id="foreign_key_nj">
                                <option value="" selected>忽略</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="col-md-3 control-label">班级</label>

                        <div class="col-md-9">
                            <select class="form-control select2me" name="bj" id="foreign_key_bj">
                                <option value="" selected>忽略</option>
                            </select>
                        </div>
                    </div>

                    <script type="text/javascript">
                        $('#foreign_key_xx').change(function (event) {
                            var
                                    foreign_key_xx_val = $(this).val(),
                                    $foreign_key_nj = $('#foreign_key_nj')
                            $foreign_key_bj = $('#foreign_key_bj')

                            $foreign_key_nj.find("option").remove()
                            $('div#s2id_foreign_key_nj span.select2-chosen').html('')
                            $foreign_key_bj.find("option").remove()
                            $('div#s2id_foreign_key_bj span.select2-chosen').html('')
                            if (foreign_key_xx_val === '') {
                                return
                            }

                            $.ajax({
                                url: '/items/accounts.models.Nianji/s/?parent_model=accounts.models.Xuexiao&parent_id='
                                        + foreign_key_xx_val,
                                success: function (response) {
                                    $foreign_key_nj.append('<option value="" selected>忽略</option>')
                                    for (var index in response) {
                                        $foreign_key_nj.append('<option value="' + response[index].id + '">' + response[index
                                                ].name + '</option>')
                                    }
                                }
                            })
                        })

                        $('#foreign_key_nj').change(function (event) {
                            var
                                    foreign_key_nj_val = $(this).val(),
                                    $foreign_key_bj = $('#foreign_key_bj')

                            $foreign_key_bj.find("option").remove()
                            $('div#s2id_foreign_key_bj span.select2-chosen').html('')
                            if (foreign_key_nj_val === '') {
                                return
                            }

                            $.ajax({
                                url: '/items/accounts.models.Banji/s/?parent_model=accounts.models.Nianji&parent_id=' + foreign_key_nj_val,
                                success: function (response) {
                                    $foreign_key_bj.append('<option value="" selected>忽略</option>')
                                    for (var index in response) {
                                        $foreign_key_bj.append('<option value="' + response[index].id + '">' + response[index
                                                ].name + '</option>')
                                    }
                                }
                            })
                        })
                    </script>

                    <div class="form-group">
                        <label class="col-md-3 control-label">每页显示</label>

                        <div class="col-md-9">
                            <select class="form-control select2me" name="numberOfPage"
                                    >
                                <option value="100" selected>100</option>
                                <option value="200">200</option>
                                <option value="300">300</option>
                                <option value="400">400</option>
                                <option value="500">500</option>
                                <option value="600">600</option>
                                <option value="-1">All</option>
                            </select>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <ul id="server_pagination" class="pagination pagination-sm"></ul>
        </div>
    </div>
</div>
<div class="modal-footer">
    <button type="button" class="btn default" data-dismiss="modal">放弃</button>
    <button type="button" class="btn green" id="post_search">确定</button>
</div>
</div>
<!-- /.modal-content -->
</div>
<!-- /.modal-dialog -->
</div>
<div class="portlet box green">
    <div class="portlet-title">
        <div class="caption">
            <i class="fa fa-user"></i>管理系统用户
        </div>
    </div>
    <div class="portlet-body" id="table_content">
        <table id="example" class="table table-striped table-bordered" width="100%" cellspacing
                ="0">
            <thead>
            <tr>

            </tr>
            </thead>
        </table>
    </div>
</div>
</div>
</div>
</div>

<script type="text/javascript">
var editor, validater; // use a global for the submit and return data rendering in the examples
var current_page = null
var get = function () {
    editor = new $.fn.dataTable.Editor({
        ajax: "/action/accounts.models.Config/s/",
        table: "#example",
        idSrc: "id",
        fields: [


            {"rules": {"required": true, "maxlength": 30}, "editable": true, "type": "mtext", "name": "first_name", "label": "\u540d\u5b57"},


            {"rules": {"required": true, "remote": {"url": "/validator/django.contrib.auth
                    .models.User / username / ", "async": false, "cache": false, "type": "get"}, "maxlength": 30}, "editable": false, "type": "mtext", "name": "username", "label": "\u7528\u6237\u540d"},



            {"rules": {"required": true, "remote": {"url": "/validator/django.contrib.auth
                    .models.User / email / ", "async": false, "cache": false, "type": "get"}, "email": true, "maxlength": 75
            }, "editable": false, "type": "mtext", "name": "email", "label": "\u7535\u5b50\u90ae\u4ef6\u5730\u5740"
            },



            {"rules": {"required": true, "remote": {"url": "/validator/django.contrib.auth
                    .models.User / sfzjh / ", "async": false, "cache": false, "type": "get"}, "isidcardno": true, "maxlength": 30}, "editable": false, "type": "mtext", "name": "sfzjh", "label": "\u8eab\u4efd\u8bc1\u53f7\u7801"
            },



            {"name": "is_superuser", "rules": {"required": true}, "editable": true, "label": "\u8d85\u7ea7\u7528\u6237\u72b6\u6001", "type": "mradio", "options": [
                {"value": true, "label": "\u662f"
                },
                {"value": false, "label": "\u5426"}
            ]},


            {"name": "is_active", "rules": {"required": true}, "editable": true, "label": "\u6709\u6548", "type": "mradio", "options": [
                {"value": true, "label": "\u662f"},
                {"value": false,
                    "label": "\u5426"}
            ]},


            {"name": "is_staff", "rules": {"required": true}, "editable": true, "label": "\u804c\u5458\u72b6\u6001", "type": "mradio", "options": [
                {"value": true, "label": "\u662f"},
                {"value": false, "label": "\u5426"}
            ]},


            {"rules": {"required": true, "datetime": true}, "editable": true, "type": "mdatetime", "name": "date_joined", "label": "\u52a0\u5165\u65e5\u671f"},


            {"rules": {"required": true, "datetime": true}, "editable": true, "type": "mdatetime", "name": "last_login", "label": "\u4e0a\u6b21\u767b\u5f55"},


            {"name": "groups[].id", "rules": {"required": true}, "editable": true, "label": "\u7ec4", "type": "mmselect", "options": [
                {"value": 7, "label": "\u6821\u957f"},
                {"value": 8, "label": "\u6559\u5b66\u6821\u957f"},
                {"value": 9, "label": "\u6559\u52a1\u4e3b\u4efb"},
                {"value": 10, "label": "\u79d1\u7814\u4e3b\u4efb"},
                {"value": 11, "label": "sdd"}
            ]},


            {"name": "xx.id", "rules": {"required": true}, "editable": true, "label": "\u5b66
\u6821
    ", "
    type
    ": "
    mselect
    ", "
    options
    ": [{"
    value
    ": 1, "
    label
    ": "\u7ee5\u5316\u7b2c\u5341\u4e2d\u5b66
    "
}
]
}


]
})
;

var validater = $(editor.dom.form).validate({
    rules: {


        first_name: {"required": true, "maxlength": 30},


        username: {"required": true, "remote": {"url": "/validator/django.contrib
                .auth.models.User / username / ", "async": false, "cache": false, "type": "get"}, "maxlength": 30},



                email
:
{
    "required"
:
    true, "remote"
:
    {
        "url"
    :
        "/validator/django.contrib.auth
                .models.User / email / ", "
        async
        ": false, "
        cache
        ": false, "
        type
        ": "
        get
        "}, "
        email
        ": true, "
        maxlength
        ": 75
    }
,


    sfzjh:{
        "required"
    :
        true, "remote"
    :
        {
            "url"
        :
            "/validator/django.contrib.auth
                    .models.User / sfzjh / ", "
            async
            ": false, "
            cache
            ": false, "
            type
            ": "
            get
            "}, "
            isidcardno
            ": true, "
            maxlength
            "
        :
            30
        }
    ,


        is_superuser:{
            "required"
        :
            true
        }
    ,


        is_active:{
            "required"
        :
            true
        }
    ,


        is_staff:{
            "required"
        :
            true
        }
    ,


        date_joined:{
            "required"
        :
            true, "datetime"
        :
            true
        }
    ,


        last_login:{
            "required"
        :
            true, "datetime"
        :
            true
        }
    ,


        groups:{
            "required"
        :
            true
        }
    ,


        xx:{
            "required"
        :
            true
        }


    }
}
),
edit_fields = [





    'username',


    'email',


    'sfzjh',


]

editor.on('open', function (e, mode, action) {
    for (var index in edit_fields) {
        editor.field(edit_fields[index]).rules(action)
    }
    validater.resetForm()
});

editor.on('preSubmit', function (e, o, action) {
    if (action !== 'remove') {
        return $(editor.dom.form).valid()
    }
})

var $table_content = $("#table_content")
$table_content.html("")
$table_content.append($('<table id="example" class="table table-striped table-bordered" width
        = "100%"
cellspacing = "0" > '
        + '<thead>'
        + '<tr>'


        + '<th>名字</th>'


        + '<th>用户名</th>'


        + '<th>电子邮件地址</th>'


        + '<th>身份证号码</th>'


        + '<th>超级用户状态</th>'


        + '<th>有效</th>'


        + '<th>职员状态</th>'


        + '<th>加入日期</th>'


        + '<th>上次登录</th>'


        + '<th>组</th>'


        + '<th>学校</th>'


        + '</tr>'
        + '</thead>'
        + '</table>'
))

var post_data = {}
var arr = $("#search_form").serializeArray()
for (index in arr) {
    post_data[arr[index].name] = arr[index].value
}

if (current_page) {
    post_data['currentPage'] = current_page
}
var table = $('#example').DataTable({
    lengthChange: false,
    ajax: {
        url: "/datas/accounts.models.Config/s/",
        type: "post",
        data: post_data
    },
    columns: [

        {"data": "first_name"}
        ,


        {"data": "username"}
        ,


        {"data": "email"}
        ,


        {"data": "sfzjh"}
        ,


        {
            data: 'is_superuser',
            render: function (data, type, row) {
                return data ? '是' : '否'
            }
        }
        ,


        {
            data: 'is_active',
            render: function (data, type, row) {
                return data ? '是' : '否'
            }
        }
        ,


        {
            data: 'is_staff',
            render: function (data, type, row) {
                return data ? '是' : '否'
            }
        }
        ,


        {"data": "date_joined"}
        ,


        {"data": "last_login"}
        ,


        {"data": "groups", "render": "[,].name"}
        ,


        {"data": "xx.name"}


    ],
    select: true
});

// Display the buttons
new $.fn.dataTable.Buttons(table, [

    { extend: "create", editor: editor },
    { extend: "edit", editor: editor },
    { extend: "remove", editor: editor },
    { extend: "copy", text: 'copy' },
    { extend: "excel", text: 'excel' },
    { extend: "pdf", text: 'pdf' },
    {
        extend: "print",
        text: 'print',
        autoPrint: false,
        customize: function (win) {
            $(win.document.body)
                    .css({'font-size': '10pt', 'background-color': 'white'})

            $(win.document.body).find('table')
                    .addClass('compact')
                    .css('font-size', 'inherit');

            $(win.document.body).find("h1").html('')
        }
    },
    {
        extend: 'colvis',
        text: 'Column Visible'
    },
    {
        text: 'Search',
        action: function (e, dt, node, config) {
            $("#filter").modal()
        }
    }
]);

table.buttons().container()
        .appendTo($('.col-sm-6:eq(0)', table.table().container()));

table.on('xhr', function () {
    var json = table.ajax.json();
    if (json.totalPages) {
        $('#server_pagination').twbsPagination({
            totalPages: json.totalPages,
            visiblePages: 5,
            first: '首页',
            last: '尾页',
            prev: '上一页',
            next: '下一页',
            onPageClick: function (event, page) {
                current_page = page
            }
        });
    }
});
}
$(function () {
    $(".actions .fa-filter").parent('a').click(function (event) {
        $("#filter").modal()
    })

    $("#post_search").click(function (event) {
        get()
        $("#filter").modal("hide")
    })
    get()
})
</script>